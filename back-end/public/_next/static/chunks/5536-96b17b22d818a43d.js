(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5536],{69134:function(e,r,t){"use strict";t.d(r,{H:function(){return v},a:function(){return h}});var a=t(57437),s=t(19197),n=t(10922),o=t(92173),i=t(69584),l=t(24033),u=t(2265),d=t(3198),c=t(96096),f=t(20994);let m=(0,f.ZF)({apiKey:"AIzaSyBbOY-beoqRpfNZ1AzAUHUz07D5znZIYQs",authDomain:"streamweb-9675d.firebaseapp.com",projectId:"streamweb-9675d",storageBucket:"streamweb-9675d.appspot.com",messagingSenderId:"957565954558",appId:"1:957565954558:web:6380af16e24e11a7c8b8af"}),p=(0,i.cF)(m),b=(0,u.createContext)(null),h=()=>{let e=(0,u.useContext)(b);if(!e)throw Error("useAuth must be used within an AuthProvider");return e},g=(e,r)=>JSON.stringify(e)===JSON.stringify(r),v=e=>{let{children:r}=e,t=(0,d.I0)(),u=(0,l.useRouter)(),f=(0,d.v9)(e=>e.data.user),m=async e=>{let r=(0,s.B)("https://nt208-g4.site/v1/api/login","POST",{username:e.username,password:e.user_password},"",{withCredentials:!0});try{let e=await o.Z.request(r);if(200===e.status){(0,n.t)("Login success");let r=e.data.user;r&&(t((0,c.c)(r)),u.push("/"))}}catch(e){(0,n.c)("Login failed ".concat((null==e?void 0:e.message).toLowerCase()))}},h=async e=>{let r=(0,s.B)("https://nt208-g4.site/v1/api/register","POST",{username:e.username,password:e.user_password,confirmed_password:e.confirm_password,user_email:e.user_email,user_fullname:e.user_fullname},"",{withCredentials:!0});try{let e=await o.Z.request(r);if(201===e.status){(0,n.t)("Welcome to the club!}");let r=e.data.user;r&&(t((0,c.c)(r)),u.push("/"))}}catch(e){console.log("err: ",e),(0,n.c)("Sign up failed \n ".concat(null==e?void 0:e.response.data.message.name))}},v=async e=>{let r=e.user_avatar;if(r){let a=(0,i.iH)(p,"images/".concat(e.user_id)),l=(0,i.B0)(a,r),u=await (0,i.Jt)(l.snapshot.ref);if(u){let r=(0,s.B)("https://nt208-g4.site/v1/api"+"/user/".concat(e.user_id),"PUT",{username:e.username,user_fullname:e.user_fullname,user_email:e.user_email,user_avatar:u},"",{withCredentials:!0});try{let e=await o.Z.request(r);if(200===e.status){let r=e.data.user,a={...f,...r};if(!g(f,a))return t((0,c.c)(a)),(0,n.t)("Update profile success"),!0;(0,n.t)("Nothing changed")}}catch(e){(0,n.c)("Update profile failed ".concat((null==e?void 0:e.message).toLowerCase()))}}}return!1};return(0,a.jsx)(b.Provider,{value:{handleLogin:m,handleSignUp:h,handleUpdateProfile:v,user:f},children:r})}},8636:function(e,r,t){"use strict";t.d(r,{HF:function(){return c},IY:function(){return u},pj:function(){return d}});var a=t(35691);let s=a.Z_().min(2,"Too Short!").max(70,"Too Long!").required("Required"),n=a.Z_().min(8,"Too Short! Minimum 8 characters").max(70,"Too Long! Maximum 70 characters").required("Required"),o=a.Z_().email("Invalid email").required("Required"),i=a.Z_().min(2,"Too Short!").max(70,"Too Long!").required("Required"),l=a.Z_().nullable(),u=a.Ry().shape({username:s,user_password:n,user_email:o,user_fullname:i,user_agree:a.O7().required("Required"),confirm_password:a.Z_().oneOf([a.iH("user_password")],"Passwords must match").required("Required")}),d=a.Ry().shape({username:s,user_password:n}),c=a.Ry().shape({username:s,user_fullname:i,user_email:o,user_avatar:l})},19197:function(e,r,t){"use strict";t.d(r,{B:function(){return a}});let a=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4?arguments[4]:void 0;return{url:e,method:r,...a&&{headers:{Authorization:"Bearer "+a}},...0!==Object.keys(t).length&&{data:t},...s&&{...s}}}},22703:function(e,r,t){"use strict";t.d(r,{cn:function(){return n},d:function(){return o}});var a=t(57042),s=t(23986);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.m)((0,a.W)(r))}function o(e){let r=Math.floor((""+e).length/3),t=parseFloat((0!=r?e/Math.pow(1e3,r):e).toPrecision(2));return t%1!=0&&(t=t.toFixed(1)),t+["","K","M","B","T"][r]}},2172:function(e,r,t){"use strict";t.d(r,{jc:function(){return g},vQ:function(){return v}});var a=t(57437),s=t(10922),n=t(94401),o=t(75002),i=t(28835),l=t(36743),u=t(57042),d=t(56230),c=t(62442),f=t(56224),m=t(99670),p=t(77216),b=t(27198),h=t(2265);let g=e=>{let{field:r,form:t,type:i,label:d,isCopyable:c,disabled:g,maxFileSize:v,accept:w,className:y,..._}=e,[N,j]=(0,h.useState)(!1),[k,Z]=(0,h.useState)(i),[C,R]=(0,h.useState)(!1);return(0,h.useEffect)(()=>{let e=null!=t&&!!t.errors[r.name]&&null!=t&&!!t.touched[r.name];R(e),"password"===i&&N&&Z("text"),"password"!==i||N||Z("password")},[i,N,t]),(0,a.jsxs)(a.Fragment,{children:["file"===i?(0,a.jsx)("div",{className:"relative w-fit",children:(0,a.jsxs)(l._,{title:"Click to upload",htmlFor:null==r?void 0:r.name,className:(0,u.Z)("flex items-center w-fit gap-2 p-4   group dark:before:bg-darker   dark:before:border-gray-600 before:absolute before:inset-0 before:rounded-3xl before:border before:transition-transform before:duration-300 active:duration-75 active:before:scale-95",{"cursor-pointer hover:before:scale-105 dark:hover:before:border-gray-500 hover:before:border-gray-300 before:bg-gray-100 before:border-gray-400/60":!g,"cursor-not-allowed before:border-gray-600  !active:before:scale-100 before:bg-gray":g}),children:[(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)(b.Z,{className:(0,u.Z)("text-blue-900 dark:text-white ",{"group-hover:text-blue-500":!g})})}),d&&(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("span",{className:(0,u.Z)("block text-base font-semibold relative text-blue-900 dark:text-white ",{"":g,"group-hover:text-blue-500":!g}),children:d}),(0,a.jsx)("span",{className:"mt-0.5 block text-sm text-gray-500 dark:text-gray-400",children:v})]})]})}):(0,a.jsx)(l._,{htmlFor:null==r?void 0:r.name,children:d}),(0,a.jsxs)("div",{className:(0,u.Z)("flex relative z-0 w-full pt-2 ",{"pb-0":C,"pb-2":!C,"gap-2 center-item":c,hidden:"file"===i}),children:[(0,a.jsx)(o.I,{className:(0,u.Z)({"!rounded-r-none":"password"===i},y),type:k,id:null==r?void 0:r.name,accept:w,disabled:g,name:null==r?void 0:r.name,value:"file"===i?void 0:null==r?void 0:r.value,onChange:e=>{if("file"!==i)r.onChange(e);else{let a=e.currentTarget.files;a&&a.length>0&&t.setFieldValue(r.name,a[0])}},onBlur:r.onBlur,multiple:"file"===i,checked:null==r?void 0:r.value,..._}),"password"===i&&(0,a.jsx)("button",{type:"button",onClick:()=>j(!N),className:"transition-all duration-150",children:(0,a.jsx)("div",{className:"px-1 bg-white text-black rounded-r-[10px] border border-beta border-l-0 h-full ",children:N?(0,a.jsx)(m.Z,{className:"relative object-cover h-full"}):(0,a.jsx)(p.Z,{className:"relative object-cover  h-full"})})}),c&&(0,a.jsx)(n.z,{onClick:e=>{e.preventDefault(),navigator.clipboard.writeText(_.value),(0,s.t)("Copied to clipboard")},children:(0,a.jsx)(f.Z,{className:"text-white"})})]}),(0,a.jsx)(x,{name:null==r?void 0:r.name,className:(0,u.Z)("py-2")})]})},v=e=>{let{field:r,form:t,...s}=e;return(0,a.jsx)(i.fC,{...r,...s,id:null==r?void 0:r.name,className:"h-[20px] w-[20px] !bg-white hover:bg-violet-800 center-item ",defaultChecked:!0,children:(0,a.jsx)(i.z$,{children:(0,a.jsx)(c.Z,{className:"text-black",size:15})})})},x=e=>{let{name:r,className:t}=e;return(0,a.jsx)(d.ErrorMessage,{id:r,name:r,component:"div",className:(0,u.Z)("text-red-500 font-bold",t)})}},10922:function(e,r,t){"use strict";t.d(r,{c:function(){return n},t:function(){return o}});var a=t(63014);let s={autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,progress:void 0,theme:"light",transition:a.Flip},n=e=>a.toast.error(e,s),o=e=>a.toast.success(e,s)},94401:function(e,r,t){"use strict";t.d(r,{z:function(){return u}});var a=t(57437),s=t(2265),n=t(67256),o=t(96061),i=t(22703);let l=(0,o.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-8 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=s.forwardRef((e,r)=>{let{className:t,variant:s,size:o,asChild:u=!1,...d}=e,c=u?n.g7:"button";return(0,a.jsx)(c,{className:(0,i.cn)(l({variant:s,size:o,className:t})),ref:r,...d})});u.displayName="Button"},13473:function(e,r,t){"use strict";t.d(r,{Ol:function(){return i},SZ:function(){return u},Zb:function(){return o},aY:function(){return d},eW:function(){return c},ll:function(){return l}});var a=t(57437),s=t(2265),n=t(22703);let o=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s})});o.displayName="Card";let i=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...s})});i.displayName="CardHeader";let l=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("h3",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...s})});l.displayName="CardTitle";let u=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("p",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",t),...s})});u.displayName="CardDescription";let d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",t),...s})});d.displayName="CardContent";let c=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",t),...s})});c.displayName="CardFooter"},75002:function(e,r,t){"use strict";t.d(r,{I:function(){return o}});var a=t(57437),s=t(2265),n=t(22703);t(40161);let o=s.forwardRef((e,r)=>{let{className:t,type:s,...o}=e;return(0,a.jsx)("input",{id:o.name,type:s,className:(0,n.cn)("text-black","flex  h-10 w-full rounded-md border border-input px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground  disabled:cursor-not-allowed disabled:opacity-50","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),ref:r,...o})});o.displayName="Input"},96096:function(e,r,t){"use strict";t.d(r,{c:function(){return n}});var a=t(20064);let s=(0,a.oM)({name:"user",initialState:{user:{user_id:"",user_email:"",user_fullname:"",user_role:"1",user_stream_key:"",username:"",user_avatar:""}},reducers:{storeUserData:(e,r)=>{e.user={...r.payload}}}}),{storeUserData:n}=s.actions;r.Z=s.reducer},40161:function(){}}]);