(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8639],{25893:function(){},17644:function(e,t,r){Promise.resolve().then(r.bind(r,91551))},69134:function(e,t,r){"use strict";r.d(t,{H:function(){return x},a:function(){return v}});var n=r(57437),s=r(19197),a=r(10922),i=r(92173),l=r(69584),o=r(24033),u=r(2265),c=r(3198),d=r(96096),f=r(20994);let m=(0,f.ZF)({apiKey:"AIzaSyBbOY-beoqRpfNZ1AzAUHUz07D5znZIYQs",authDomain:"streamweb-9675d.firebaseapp.com",projectId:"streamweb-9675d",storageBucket:"streamweb-9675d.appspot.com",messagingSenderId:"957565954558",appId:"1:957565954558:web:6380af16e24e11a7c8b8af"}),p=(0,l.cF)(m),h=(0,u.createContext)(null),v=()=>{let e=(0,u.useContext)(h);if(!e)throw Error("useAuth must be used within an AuthProvider");return e},g=(e,t)=>JSON.stringify(e)===JSON.stringify(t),x=e=>{let{children:t}=e,r=(0,c.I0)(),u=(0,o.useRouter)(),f=(0,c.v9)(e=>e.data.user),m=async e=>{let t=(0,s.B)("https://nt208-g4.site/v1/api/login","POST",{username:e.username,password:e.user_password},"",{withCredentials:!0});try{let e=await i.Z.request(t);if(200===e.status){(0,a.t)("Login success");let t=e.data.user;t&&(r((0,d.c)(t)),u.push("/"))}}catch(e){(0,a.c)("Login failed ".concat((null==e?void 0:e.message).toLowerCase()))}},v=async e=>{let t=(0,s.B)("https://nt208-g4.site/v1/api/register","POST",{username:e.username,password:e.user_password,confirmed_password:e.confirm_password,user_email:e.user_email,user_fullname:e.user_fullname},"",{withCredentials:!0});try{let e=await i.Z.request(t);if(201===e.status){(0,a.t)("Welcome to the club!}");let t=e.data.user;t&&(r((0,d.c)(t)),u.push("/"))}}catch(e){console.log("err: ",e),(0,a.c)("Sign up failed \n ".concat(null==e?void 0:e.response.data.message.name))}},x=async e=>{let t=e.user_avatar;if(t){let n=(0,l.iH)(p,"images/".concat(e.user_id)),o=(0,l.B0)(n,t),u=await (0,l.Jt)(o.snapshot.ref);if(u){let t=(0,s.B)("https://nt208-g4.site/v1/api"+"/user/".concat(e.user_id),"PUT",{username:e.username,user_fullname:e.user_fullname,user_email:e.user_email,user_avatar:u},"",{withCredentials:!0});try{let e=await i.Z.request(t);if(200===e.status){let t=e.data.user,n={...f,...t};if(!g(f,n))return r((0,d.c)(n)),(0,a.t)("Update profile success"),!0;(0,a.t)("Nothing changed")}}catch(e){(0,a.c)("Update profile failed ".concat((null==e?void 0:e.message).toLowerCase()))}}}return!1};return(0,n.jsx)(h.Provider,{value:{handleLogin:m,handleSignUp:v,handleUpdateProfile:x,user:f},children:t})}},19197:function(e,t,r){"use strict";r.d(t,{B:function(){return n}});let n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4?arguments[4]:void 0;return{url:e,method:t,...n&&{headers:{Authorization:"Bearer "+n}},...0!==Object.keys(r).length&&{data:r},...s&&{...s}}}},22703:function(e,t,r){"use strict";r.d(t,{cn:function(){return a},d:function(){return i}});var n=r(57042),s=r(23986);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m)((0,n.W)(t))}function i(e){let t=Math.floor((""+e).length/3),r=parseFloat((0!=t?e/Math.pow(1e3,t):e).toPrecision(2));return r%1!=0&&(r=r.toFixed(1)),r+["","K","M","B","T"][t]}},10922:function(e,t,r){"use strict";r.d(t,{c:function(){return a},t:function(){return i}});var n=r(63014);let s={autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,progress:void 0,theme:"light",transition:n.Flip},a=e=>n.toast.error(e,s),i=e=>n.toast.success(e,s)},94401:function(e,t,r){"use strict";r.d(t,{z:function(){return u}});var n=r(57437),s=r(2265),a=r(67256),i=r(96061),l=r(22703);let o=(0,i.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-8 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:u=!1,...c}=e,d=u?a.g7:"button";return(0,n.jsx)(d,{className:(0,l.cn)(o({variant:s,size:i,className:r})),ref:t,...c})});u.displayName="Button"},13473:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return u},Zb:function(){return i},aY:function(){return c},eW:function(){return d},ll:function(){return o}});var n=r(57437),s=r(2265),a=r(22703);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...s})});l.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});o.displayName="CardTitle";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...s})});u.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...s})});d.displayName="CardFooter"},75002:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var n=r(57437),s=r(2265),a=r(22703);r(40161);let i=s.forwardRef((e,t)=>{let{className:r,type:s,...i}=e;return(0,n.jsx)("input",{id:i.name,type:s,className:(0,a.cn)("text-black","flex  h-10 w-full rounded-md border border-input px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground  disabled:cursor-not-allowed disabled:opacity-50","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),ref:t,...i})});i.displayName="Input"},91551:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var n=r(57437),s=r(32870),a=r(13473),i=r(2265),l=r(63388),o=r(75002),u=r(36743),c=r(96061),d=r(22703);let f=(0,c.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),m=i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(u.f,{ref:t,className:(0,d.cn)(f(),r),...s})});m.displayName=u.f.displayName;var p=r(94401),h=r(69134),v=()=>{let[e,t]=(0,i.useState)(),r=(0,l.io)("https://nt208-g4.site"),{user:u}=(0,h.a)();return r.on("preview_".concat(u.user_id),e=>{t(e)}),console.log(e),(0,n.jsxs)("main",{className:"container center-item ",children:[(0,n.jsxs)(a.Zb,{children:[(0,n.jsxs)(a.Ol,{children:[(0,n.jsx)(a.ll,{children:"Preview"}),(0,n.jsx)(a.SZ,{children:"Connect your stream application with stream key below to start"})]}),(0,n.jsx)(a.aY,{children:e&&(0,n.jsx)(s.default,{url:e})})]}),(0,n.jsxs)(a.Zb,{children:[(0,n.jsxs)(a.Ol,{children:[(0,n.jsx)(a.ll,{children:"Set up your live streaming software"}),(0,n.jsx)(a.SZ,{children:"Copy and paste this stream key into the live streaming software you're using."})]}),(0,n.jsxs)(a.aY,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(m,{htmlFor:"key",children:"Stream Key"}),(0,n.jsx)(o.I,{id:"key",defaultValue:u.user_id,readOnly:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(m,{htmlFor:"rtmp",children:"Server URL"}),(0,n.jsx)(o.I,{id:"rtmp",defaultValue:"rtmp://backend.nt208-g4.site:1935/trancoder",readOnly:!0})]})]})]}),(0,n.jsx)(a.Zb,{children:(0,n.jsxs)(a.aY,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(m,{htmlFor:"name",children:"Title"}),(0,n.jsx)(o.I,{id:"name"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(m,{htmlFor:"thumbnail",children:"Thumbnail"}),(0,n.jsx)(o.I,{id:"thumbnail"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(p.z,{children:"Return"}),(0,n.jsx)(p.z,{children:"Go Live"})]})]})})]})}},32870:function(e,t,r){"use strict";r.r(t);var n=r(57437),s=r(2265),a=r(84267);r(35629),r(85449),t.default=e=>{let{url:t}=e,r=(0,s.useRef)(null),[i,l]=(0,s.useState)(!1),[o,u]=(0,s.useState)(null);return(0,s.useEffect)(()=>{r.current&&(0,a.default)(r.current,{liveui:!0,liveTracker:!0,autoplay:!1,controls:!0,sources:[{src:t,type:"application/x-mpegURL"}],lowLatency:!0,enableWorker:!0,lowLatencyMode:!0,backBufferLength:90,playbackRates:[.5,1,1.5,2],plugins:{qualityLevels:{}}}).qualitySelectorHls()},[]),(0,n.jsx)("div",{className:"flex flex-col w-full h-[400px] justify-center items-center relative",children:(0,n.jsx)("video",{ref:r,className:"video-js vjs-default-skin w-full h-full flex flex-col justify-center items-center rounded-xl",controls:!0})})}},96096:function(e,t,r){"use strict";r.d(t,{c:function(){return a}});var n=r(20064);let s=(0,n.oM)({name:"user",initialState:{user:{user_id:"",user_email:"",user_fullname:"",user_role:"1",user_stream_key:"",username:"",user_avatar:""}},reducers:{storeUserData:(e,t)=>{e.user={...t.payload}}}}),{storeUserData:a}=s.actions;t.Z=s.reducer},40161:function(){},85449:function(){},36743:function(e,t,r){"use strict";r.d(t,{_:function(){return i},f:function(){return l}});var n=r(13428),s=r(2265),a=r(9381);let i=(0,s.forwardRef)((e,t)=>(0,s.createElement)(a.WV.label,(0,n.Z)({},e,{ref:t,onMouseDown:t=>{var r;null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault()}}))),l=i},9381:function(e,t,r){"use strict";r.d(t,{WV:function(){return i}});var n=r(13428),s=r(2265);r(54887);var a=r(67256);let i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let r=(0,s.forwardRef)((e,r)=>{let{asChild:i,...l}=e,o=i?a.g7:t;return(0,s.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]),(0,s.createElement)(o,(0,n.Z)({},l,{ref:r}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{})}},function(e){e.O(0,[2532,9089,6413,4789,5564,9625,9722,9622,2971,596,1744],function(){return e(e.s=17644)}),_N_E=e.O()}]);